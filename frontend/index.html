<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelMaster AI - Plan Your Dream Vacation</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .travel-bg {
            min-height: 100vh;
        }

        .voice-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .travel-card {
            transition: all 0.3s ease;
            border-left: 4px solid #007bff;
            background: white;
            border-radius: 12px;
        }

        .travel-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 123, 255, 0.2);
            border-left-color: #28a745;
        }

        .airport-info {
            background: linear-gradient(45deg, rgba(0, 123, 255, 0.1), rgba(40, 167, 69, 0.1));
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 0.85rem;
            color: #495057;
            border: 1px solid rgba(0, 123, 255, 0.3);
            margin: 4px 0;
        }

        .flight-number {
            background: linear-gradient(45deg, #007bff, #0056b3);
            border-radius: 20px;
            padding: 4px 12px;
            font-weight: bold;
            font-size: 0.85rem;
            color: white;
            border: none;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
        }

        .destination-preview {
            border-radius: 12px;
            overflow: hidden;
            height: 300px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            margin-bottom: 16px;
            position: relative;
        }

        .hackathon-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
            text-align: center;
        }

        .hotel-image,
        .destination-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Main App Component
        function TravelMasterApp() {
            const [currentStep, setCurrentStep] = useState('planning');
            const [travelRequest, setTravelRequest] = useState({
                destination: '',
                departure_location: '',
                start_date: '',
                end_date: '',
                budget: 0,
                travelers: 1,
                preferences: [],
                special_requirements: ''
            });
            const [isLoading, setIsLoading] = useState(false);
            const [itinerary, setItinerary] = useState(null);
            const [isListening, setIsListening] = useState(false);

            // Create refs for form inputs to avoid focus issues
            const destinationRef = useRef(null);
            const departureRef = useRef(null);
            const budgetRef = useRef(null);
            const specialReqRef = useRef(null);
            const startDateRef = useRef(null);
            const endDateRef = useRef(null);
            const travelersRef = useRef(null);
            const preferencesRef = useRef(new Set());

            // Voice Recognition Setup
            const startVoiceRecognition = () => {
                if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.continuous = false;
                    recognition.interimResults = false;
                    recognition.lang = 'en-US';

                    recognition.onstart = () => {
                        setIsListening(true);
                    };

                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript.toLowerCase();
                        parseVoiceInput(transcript);
                    };

                    recognition.onend = () => {
                        setIsListening(false);
                    };

                    recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        setIsListening(false);
                    };

                    recognition.start();
                } else {
                    alert('Speech recognition not supported in this browser');
                }
            };

            // Parse voice input
            const parseVoiceInput = (text) => {
                console.log('Voice input:', text);

                // Parse destinations
                if (text.includes('paris')) setTravelRequest(prev => ({ ...prev, destination: 'Paris, France' }));
                if (text.includes('london')) setTravelRequest(prev => ({ ...prev, destination: 'London, UK' }));
                if (text.includes('tokyo')) setTravelRequest(prev => ({ ...prev, destination: 'Tokyo, Japan' }));
                if (text.includes('new york')) setTravelRequest(prev => ({ ...prev, destination: 'New York, USA' }));

                // Parse budget
                const budgetMatch = text.match(/budget.*?(\d+)/);
                if (budgetMatch) {
                    setTravelRequest(prev => ({ ...prev, budget: parseFloat(budgetMatch[1]) }));
                }

                // Parse preferences
                if (text.includes('luxury')) {
                    setTravelRequest(prev => ({
                        ...prev,
                        preferences: [...prev.preferences, 'luxury']
                    }));
                }
                if (text.includes('budget')) {
                    setTravelRequest(prev => ({
                        ...prev,
                        preferences: [...prev.preferences, 'budget']
                    }));
                }
                if (text.includes('adventure')) {
                    setTravelRequest(prev => ({
                        ...prev,
                        preferences: [...prev.preferences, 'adventure']
                    }));
                }
            };

            // Function to get destination image URL using a more reliable service
            const getDestinationImage = (destination) => {
                const cityName = destination.split(',')[0].toLowerCase().replace(/\s+/g, '-');
                // Use Picsum with a specific seed for consistent images
                const seed = cityName.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
                return `https://picsum.photos/seed/${seed}/800/300`;
            };

            // Function to get hotel image
            const getHotelImage = (hotelName, index) => {
                const seed = (hotelName + index).split('').reduce((a, b) => a + b.charCodeAt(0), 0);
                return `https://picsum.photos/seed/hotel${seed}/400/250`;
            };

            // Function to get activity image
            const getActivityImage = (activityName, index) => {
                const seed = (activityName + index).split('').reduce((a, b) => a + b.charCodeAt(0), 0);
                return `https://picsum.photos/seed/activity${seed}/300/200`;
            };

            // Plan trip function
            const planTrip = async () => {
                setIsLoading(true);
                try {
                    // Collect data from refs to avoid focus issues
                    const requestData = {
                        destination: destinationRef.current?.value || '',
                        departure_location: departureRef.current?.value || '',
                        start_date: startDateRef.current?.value || '',
                        end_date: endDateRef.current?.value || '',
                        budget: parseFloat(budgetRef.current?.value) || 0,
                        travelers: parseInt(travelersRef.current?.value) || 1,
                        preferences: Array.from(preferencesRef.current),
                        special_requirements: specialReqRef.current?.value || ''
                    };

                    const response = await fetch('http://localhost:8000/api/plan-trip', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestData),
                    });

                    if (response.ok) {
                        const result = await response.json();
                        setItinerary(result);
                        setCurrentStep('results');
                    } else {
                        throw new Error('Failed to plan trip');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Failed to plan trip. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            // Planning Form Component
            const PlanningForm = () => (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl max-w-4xl w-full">
                    <div className="hackathon-header">
                        <h1 className="text-4xl font-bold mb-4">
                            🌍 TravelMaster AI
                        </h1>
                        <p className="text-xl opacity-90">
                            Plan your perfect trip with AI-powered recommendations
                        </p>
                        <div className="mt-4 flex justify-center space-x-6 text-sm">
                            <span><i className="fas fa-robot mr-1"></i>Smart Planning</span>
                            <span><i className="fas fa-dollar-sign mr-1"></i>Budget Aware</span>
                            <span><i className="fas fa-microphone mr-1"></i>Voice Enabled</span>
                        </div>
                    </div>

                    {/* Form Fields */}
                    <div className="grid md:grid-cols-2 gap-6">
                        {/* Destination */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-map-marker-alt mr-2"></i>Destination
                            </label>
                            <input
                                ref={destinationRef}
                                type="text"
                                defaultValue={travelRequest.destination}
                                placeholder="Where do you want to go?"
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        {/* Departure Location */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-plane-departure mr-2"></i>Departure Location
                            </label>
                            <input
                                ref={departureRef}
                                type="text"
                                defaultValue={travelRequest.departure_location}
                                placeholder="Where are you leaving from?"
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        {/* Start Date */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-calendar-alt mr-2"></i>Start Date
                            </label>
                            <input
                                ref={startDateRef}
                                type="date"
                                defaultValue={travelRequest.start_date}
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        {/* End Date */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-calendar-check mr-2"></i>End Date
                            </label>
                            <input
                                ref={endDateRef}
                                type="date"
                                defaultValue={travelRequest.end_date}
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        {/* Budget */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-dollar-sign mr-2"></i>Budget (USD)
                            </label>
                            <input
                                ref={budgetRef}
                                type="number"
                                defaultValue={travelRequest.budget || ''}
                                placeholder="Total budget"
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                        </div>

                        {/* Travelers */}
                        <div>
                            <label className="block text-gray-700 font-semibold mb-2">
                                <i className="fas fa-users mr-2"></i>Travelers
                            </label>
                            <select
                                ref={travelersRef}
                                defaultValue={travelRequest.travelers}
                                className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            >
                                {[1, 2, 3, 4, 5, 6].map(num => (
                                    <option key={num} value={num}>{num} {num === 1 ? 'Person' : 'People'}</option>
                                ))}
                            </select>
                        </div>
                    </div>

                    {/* Preferences */}
                    <div className="mt-6">
                        <label className="block text-gray-700 font-semibold mb-4">
                            <i className="fas fa-heart mr-2"></i>Travel Preferences
                        </label>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                            {['budget', 'mid_range', 'luxury', 'adventure', 'relaxation', 'cultural'].map(pref => (
                                <label key={pref} className="flex items-center cursor-pointer">
                                    <input
                                        type="checkbox"
                                        name="preferences"
                                        value={pref}
                                        defaultChecked={travelRequest.preferences.includes(pref)}
                                        onChange={(e) => {
                                            if (e.target.checked) {
                                                preferencesRef.current.add(pref);
                                            } else {
                                                preferencesRef.current.delete(pref);
                                            }
                                        }}
                                        className="mr-2"
                                    />
                                    <span className="text-gray-700 capitalize">{pref.replace('_', ' ')}</span>
                                </label>
                            ))}
                        </div>
                    </div>

                    {/* Special Requirements */}
                    <div className="mt-6">
                        <label className="block text-gray-700 font-semibold mb-2">
                            <i className="fas fa-info-circle mr-2"></i>Special Requirements
                        </label>
                        <textarea
                            ref={specialReqRef}
                            defaultValue={travelRequest.special_requirements}
                            placeholder="Any special requests or requirements?"
                            rows="3"
                            className="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        ></textarea>
                    </div>

                    {/* Action Buttons */}
                    <div className="flex gap-4 mt-8 justify-center">
                        <button
                            onClick={startVoiceRecognition}
                            className={`px-8 py-4 rounded-lg font-semibold transition-all shadow-lg ${isListening
                                    ? 'bg-red-500 text-white voice-pulse'
                                    : 'bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700'
                                }`}
                        >
                            <i className={`fas ${isListening ? 'fa-stop' : 'fa-microphone'} mr-2`}></i>
                            {isListening ? 'Stop Recording' : '🎤 Voice Planning'}
                        </button>

                        <button
                            onClick={planTrip}
                            disabled={isLoading}
                            className="px-8 py-4 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"
                        >
                            {isLoading ? (
                                <>
                                    <i className="fas fa-spinner fa-spin mr-2"></i>
                                    🤖 AI Planning Your Trip...
                                </>
                            ) : (
                                <>
                                    <i className="fas fa-brain mr-2"></i>
                                    🚀 Plan with AI
                                </>
                            )}
                        </button>
                    </div>
                </div>
            );

            const ResultsDisplay = () => (
                <div className="glass-effect rounded-2xl p-8 shadow-2xl max-w-6xl w-full">
                    {/* Hackathon Header */}
                    <div className="hackathon-header mb-8">
                        <h1 className="text-4xl font-bold mb-4">🏆 TravelMaster AI</h1>
                        <p className="text-xl opacity-90">Intelligent Budget-Aware Travel Planning</p>
                        <div className="mt-4 flex justify-center space-x-6 text-sm">
                            <span><i className="fas fa-brain mr-1"></i>AI-Powered</span>
                            <span><i className="fas fa-chart-line mr-1"></i>Budget Optimized</span>
                            <span><i className="fas fa-globe mr-1"></i>Global Coverage</span>
                        </div>
                    </div>

                    {/* Destination Preview */}
                    <div className="destination-preview mb-8 relative">
                        <img
                            src={getDestinationImage(itinerary?.request?.destination)}
                            alt={itinerary?.request?.destination}
                            className="w-full h-full object-cover"
                            style={{ filter: 'brightness(0.7)' }}
                            onError={(e) => {
                                e.target.src = 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                            }}
                        />
                        <div className="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30">
                            <div className="text-center text-white">
                                <h2 className="text-5xl font-bold mb-3">
                                    Welcome to {itinerary?.request?.destination}
                                </h2>
                                <p className="text-2xl opacity-90 mb-4">Your AI-Planned Adventure Awaits!</p>
                                <div className="flex justify-center space-x-6 text-lg">
                                    <span><i className="fas fa-calendar mr-2"></i>{(itinerary?.end_date && itinerary?.start_date) ? Math.ceil((new Date(itinerary.end_date) - new Date(itinerary.start_date)) / (1000 * 60 * 60 * 24)) : 'N/A'} Days</span>
                                    <span><i className="fas fa-users mr-2"></i>{itinerary?.request?.travelers} Travelers</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Smart Budget Analytics */}
                    <div className="mb-8">
                        <h2 className="text-3xl font-bold text-gray-800 mb-6 text-center">
                            📊 Smart Budget Analytics
                        </h2>
                        <div className="grid md:grid-cols-4 gap-4">
                            <div className="stat-card">
                                <i className="fas fa-calendar-alt text-3xl text-blue-500 mb-3"></i>
                                <div className="font-semibold text-gray-600">Trip Duration</div>
                                <div className="text-2xl font-bold text-gray-800">
                                    {(itinerary?.request?.end_date && itinerary?.request?.start_date) ?
                                        Math.ceil((new Date(itinerary.request.end_date) - new Date(itinerary.request.start_date)) / (1000 * 60 * 60 * 24)) : 'N/A'} Days
                                </div>
                                <div className="text-sm text-gray-500 mt-1">
                                    {new Date(itinerary?.request?.start_date).toLocaleDateString()} - {new Date(itinerary?.request?.end_date).toLocaleDateString()}
                                </div>
                            </div>
                            <div className="stat-card">
                                <i className="fas fa-wallet text-3xl text-purple-500 mb-3"></i>
                                <div className="font-semibold text-gray-600">Budget Used</div>
                                <div className="text-2xl font-bold text-gray-800">${parseFloat(itinerary?.total_cost || 0).toFixed(2)}</div>
                                <div className="text-sm text-purple-600 mt-1">
                                    {((parseFloat(itinerary?.total_cost || 0) / parseFloat(itinerary?.request?.budget || 1)) * 100).toFixed(1)}% of ${parseFloat(itinerary?.request?.budget || 0).toFixed(0)}
                                </div>
                            </div>
                            <div className="stat-card">
                                <i className="fas fa-piggy-bank text-3xl text-green-500 mb-3"></i>
                                <div className="font-semibold text-gray-600">Money Saved</div>
                                <div className="text-2xl font-bold text-green-600">${parseFloat(itinerary?.savings || 0).toFixed(2)}</div>
                                <div className="text-sm text-green-500 mt-1">
                                    {((parseFloat(itinerary?.savings || 0) / parseFloat(itinerary?.request?.budget || 1)) * 100).toFixed(1)}% under budget!
                                </div>
                            </div>
                            <div className="stat-card">
                                <i className="fas fa-star text-3xl text-yellow-500 mb-3"></i>
                                <div className="font-semibold text-gray-600">AI Score</div>
                                <div className="text-2xl font-bold text-yellow-600">
                                    {Math.min(99, Math.max(85, 95 - (parseFloat(itinerary?.total_cost || 0) / parseFloat(itinerary?.request?.budget || 1)) * 10)).toFixed(0)}/100
                                </div>
                                <div className="text-sm text-yellow-500 mt-1">Optimization Rating</div>
                            </div>
                        </div>
                    </div>

                    {/* Flights */}
                    <div className="mb-8">
                        <h3 className="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                            <i className="fas fa-plane mr-3 text-blue-500"></i>✈️ Flights
                        </h3>
                        <div className="space-y-6">
                            {itinerary?.flights?.map((flight, idx) => (
                                <div key={idx} className="travel-card p-6">
                                    <div className="flex justify-between items-start mb-4">
                                        <div className="flex-1">
                                            <div className="flex items-center mb-2">
                                                <span className="flight-number">{flight.flight_number || `FL${idx + 1}001`}</span>
                                                <span className="font-semibold text-lg text-gray-800">{flight.airline}</span>
                                            </div>
                                            <div className="text-sm text-gray-600 mb-2">
                                                <i className="fas fa-plane mr-2 text-blue-500"></i>
                                                {flight.aircraft || 'Commercial Aircraft'} • {flight.duration} • {flight.stops === 0 ? 'Nonstop' : `${flight.stops} stop${flight.stops > 1 ? 's' : ''}`}
                                            </div>
                                        </div>
                                        <div className="text-right">
                                            <div className="font-bold text-2xl text-gray-800">${parseFloat(flight.price || 0).toFixed(0)}</div>
                                            <div className="text-sm text-gray-500">{flight.booking_class || 'Economy'}</div>
                                        </div>
                                    </div>

                                    {/* Airport Information */}
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="airport-info">
                                            <div className="font-semibold text-xs text-gray-500">DEPARTURE</div>
                                            <div className="font-bold text-gray-700">{flight.departure_airport || 'LAX'} - {flight.departure_airport_name || 'Los Angeles Intl'}</div>
                                            <div className="text-sm text-gray-600">{new Date(flight.departure_time).toLocaleString()}</div>
                                        </div>
                                        <div className="airport-info">
                                            <div className="font-semibold text-xs text-gray-500">ARRIVAL</div>
                                            <div className="font-bold text-gray-700">{flight.arrival_airport || 'JFK'} - {flight.arrival_airport_name || 'John F Kennedy Intl'}</div>
                                            <div className="text-sm text-gray-600">{new Date(flight.arrival_time).toLocaleString()}</div>
                                        </div>
                                    </div>

                                    <div className="text-sm text-gray-600 flex justify-between items-center">
                                        <span><i className="fas fa-users mr-1 text-green-500"></i>{flight.available_seats || '12'} seats available</span>
                                        <span><i className="fas fa-check-circle mr-1 text-blue-500"></i>Instant confirmation</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Hotels */}
                    <div className="mb-8">
                        <h3 className="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                            <i className="fas fa-bed mr-3 text-blue-300"></i>🏨 Hotels & Accommodation
                        </h3>
                        <div className="space-y-6">
                            {itinerary?.hotels?.map((hotel, idx) => (
                                <div key={idx} className="travel-card p-0 overflow-hidden">
                                    <img
                                        src={getHotelImage(hotel.name, idx)}
                                        alt={hotel.name}
                                        className="hotel-image"
                                        onError={(e) => {
                                            e.target.src = 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80';
                                        }}
                                    />
                                    <div className="p-6">
                                        <div className="flex justify-between items-start mb-4">
                                            <div className="flex-1">
                                                <div className="font-bold text-xl text-gray-800 mb-2">{hotel.name}</div>
                                                <div className="flex items-center mb-2">
                                                    <div className="flex text-yellow-400 mr-2">
                                                        {[...Array(Math.floor(hotel.rating))].map((_, i) => (
                                                            <i key={i} className="fas fa-star text-sm"></i>
                                                        ))}
                                                        {hotel.rating % 1 !== 0 && <i className="fas fa-star-half-alt text-sm"></i>}
                                                    </div>
                                                    <span className="text-sm text-gray-600">{hotel.rating} rating</span>
                                                </div>
                                                <div className="airport-info inline-block">
                                                    <i className="fas fa-map-marker-alt mr-1"></i>{hotel.location}
                                                </div>
                                            </div>
                                            <div className="text-right">
                                                <div className="font-bold text-2xl text-gray-800">${parseFloat(hotel.total_price || 0).toFixed(0)}</div>
                                                <div className="text-sm text-gray-500">${parseFloat(hotel.price_per_night || 0).toFixed(0)}/night</div>
                                            </div>
                                        </div>
                                        <div className="text-gray-600 text-sm mb-3">
                                            <i className="fas fa-concierge-bell mr-2"></i>
                                            {hotel.amenities?.slice(0, 6).join(' • ')}
                                        </div>
                                        <div className="flex justify-between items-center text-sm">
                                            <span className="text-green-600">
                                                <i className="fas fa-check-circle mr-1"></i>Free cancellation
                                            </span>
                                            <span className="text-blue-600">
                                                <i className="fas fa-wifi mr-1"></i>Free WiFi included
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Activities */}
                    <div className="mb-8">
                        <h3 className="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                            <i className="fas fa-compass mr-3 text-purple-300"></i>🎯 Activities & Experiences
                        </h3>
                        <div className="grid md:grid-cols-2 gap-6">
                            {itinerary?.activities?.map((activity, idx) => (
                                <div key={idx} className="travel-card p-0 overflow-hidden">
                                    <img
                                        src={getActivityImage(activity.name, idx)}
                                        alt={activity.name}
                                        className="w-full h-48 object-cover"
                                        onError={(e) => {
                                            e.target.src = 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80';
                                        }}
                                    />
                                    <div className="p-5">
                                        <div className="font-bold text-lg text-gray-800 mb-2">{activity.name}</div>
                                        <div className="flex items-center mb-3">
                                            <div className="flex text-yellow-400 mr-2">
                                                {[...Array(Math.floor(activity.rating))].map((_, i) => (
                                                    <i key={i} className="fas fa-star text-sm"></i>
                                                ))}
                                                {activity.rating % 1 !== 0 && <i className="fas fa-star-half-alt text-sm"></i>}
                                            </div>
                                            <span className="text-sm text-gray-600 mr-3">{activity.rating}</span>
                                            <span className="airport-info">
                                                <i className="fas fa-clock mr-1"></i>{activity.duration}
                                            </span>
                                        </div>
                                        <div className="text-sm text-gray-600 mb-4 leading-relaxed">{activity.description}</div>
                                        <div className="flex justify-between items-center">
                                            <div className="font-bold text-xl text-gray-800">${parseFloat(activity.price || 0).toFixed(0)}</div>
                                            <div className="text-sm text-gray-500">
                                                <i className="fas fa-ticket-alt mr-1"></i>per person
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="mt-8 text-center">
                        <button
                            onClick={() => setCurrentStep('planning')}
                            className="px-6 py-3 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 mr-4 shadow-lg"
                        >
                            <i className="fas fa-arrow-left mr-2"></i>Plan Another Trip
                        </button>
                        <button
                            onClick={() => alert('🎉 Hackathon Demo: Booking simulation complete! In production, this would integrate with real booking APIs.')}
                            className="px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-bold hover:from-green-600 hover:to-emerald-700 shadow-xl transform hover:scale-105 transition-all"
                        >
                            <i className="fas fa-credit-card mr-2"></i>🏆 Book This AI-Planned Trip
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="travel-bg flex items-center justify-center p-4">
                    <div className="w-full flex justify-center">
                        {currentStep === 'planning' ? <PlanningForm /> : <ResultsDisplay />}
                    </div>
                </div>
            );
        }

        // Render the app (React 18 compatible)
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TravelMasterApp />);
    </script>
</body>

</html>
